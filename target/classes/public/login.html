<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
</head>
<script src="/webjars/jquery/jquery.min.js "></script>
<body>
<h1>财务系统</h1>
    <div>
        <label>用户名: </label>
        <input type="text" id="name"/>
        </br>
        <label>密码: </label>
        <input type="text" id="pwd"/>
        </br>
        <input id="submit" type="submit" value="登录"></input>
    </div>
</body>
<script>
    $("#submit").click(
        function (){
        $.ajax({
            url: 'login',
            type: 'post',
            data: {"name":$("#name").val(),"pwd":$("#pwd").val()},
            success: function (res)
            {
                //请求令牌
                queryToken($("#name").val(),$("#pwd").val());
            },
            error: function (res)
            {
                alert("出现未知异常")
             }
        })
    })

    //请求令牌
    function queryToken(name,pwd)
    {
        $.ajax({
           url:'authentication' ,
            type:'post',
            data:{"name":name,"pwd":pwd}
            ,success: function (res)
            {
                //将token放入localstorage中
                localStorage.wrnm=res.data
                location.assign("bank.html");
            },
            error:function (res)
            {
                 alert("出现未知异常")
            }
        });
    }
</script>
</html>